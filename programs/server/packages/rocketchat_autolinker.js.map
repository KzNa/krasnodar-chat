{"version":3,"sources":["meteor://ðŸ’»app/packages/rocketchat_autolinker/autolinker.coffee"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;AAAA;;;GAAA;AAAA;;AAAA;AAMc,sBAAC,OAAD;AACZ;AAAA,QAAG,CAAC,CAAC,IAAF,CAAO,OAAO,CAAC,IAAf,CAAH;AAEC,iBAAW,OAAO,CAAC,IAAI,CAAC,KAAb,CAAmB,2CAAnB,CAAX;AAEA;+BAAA;AACC,YAAG,kDAAgB,CAAnB;AAEC,sBAAY,IAAI,CAAC,KAAL,CAAW,mDAAX,CAAZ;AACA,cAAO,iBAAP;AACC,oBAAS,OAAT,GAAkB,UAAU,CAAC,IAAX,CAAgB,IAAhB,EACjB;AAAA,2BAAa,KAAb;AAAA,cACA,SAAS,KADT;AAAA,cAEA,WAAW,SAAC,UAAD,EAAa,KAAb;AACV,oBAAG,KAAK,CAAC,OAAN,OAAmB,KAAtB;AACC,yBAAO,iBAAiB,CAAC,IAAlB,CAAuB,KAAK,CAAC,WAA7B,CAAP,CADD;iBAAA;AAEA,uBAAO,IAAP,CAHU;cAAA,CAFX;aADiB,CAAlB,CADD;WAHD;SADD;AAAA,OAFA;AAAA,MAgBA,OAAO,CAAC,IAAR,GAAe,QAAQ,CAAC,IAAT,CAAc,EAAd,CAhBf,CAFD;KAAA;AAoBA,WAAO,OAAP,CArBY;EAAA,CAAb;;oBAAA;;IAND;;AAAA,UA6BU,CAAC,SAAS,CAAC,GAArB,CAAyB,eAAzB,EAA0C,UAA1C,CA7BA","file":"/packages/rocketchat_autolinker.js","sourcesContent":["###\n# AutoLinker is a named function that will replace links on messages\n# @param {Object} message - The message object\n###\n\nclass AutoLinker\n\tconstructor: (message) ->\n\t\tif _.trim message.html\n\t\t\t# Separate text in code blocks and non code blocks\n\t\t\tmsgParts = message.html.split /(```\\w*[\\n ]?[\\s\\S]*?```+?)|(`(?:[^`]+)`)/\n\n\t\t\tfor part, index in msgParts\n\t\t\t\tif part?.length? > 0\n\t\t\t\t\t# Verify if this part is code\n\t\t\t\t\tcodeMatch = part.match /(?:```(\\w*)[\\n ]?([\\s\\S]*?)```+?)|(?:`(?:[^`]+)`)/\n\t\t\t\t\tif not codeMatch?\n\t\t\t\t\t\tmsgParts[index] = Autolinker.link part,\n\t\t\t\t\t\t\tstripPrefix: false\n\t\t\t\t\t\t\ttwitter: false\n\t\t\t\t\t\t\treplaceFn: (autolinker, match) ->\n\t\t\t\t\t\t\t\tif match.getType() is 'url'\n\t\t\t\t\t\t\t\t\treturn /(:\\/\\/|www\\.).+/.test match.matchedText\n\t\t\t\t\t\t\t\treturn true\n\n\t\t\t# Re-mount message\n\t\t\tmessage.html = msgParts.join('')\n\n\t\treturn message\n\nRocketChat.callbacks.add 'renderMessage', AutoLinker\n"]}